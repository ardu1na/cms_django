<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Digesto de la Municipalidad de El Bolsón</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        
        <!-- BOOTSTRAP CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
        <!-- BOOTSTRAP ICONS  -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
        <!-- CUSTOM STYLE  -->
        <style>
           
            
            a:hover {
                color: #0aca22; 
              }
        </style>

    </head>
    <body>

        <!-- MAIN -->
        <div class="container-fluid m-0 p-0">
            <div class="col-12 bg-dark py-5">
                <h2 class="mt-4 mx-2 mx-md-5 text-white text-center"><strong>Búsqueda Avanzada</strong></h2>
                <h3 class="text-secondary text-center">Digesto Municipal de El Bolsón</h3>
            </div>

            <!-- intro buscador -->
            <div class="row py-2 mx-2 my-4 px-md-5 mx-md-5">
                

                <p class="card-text">Encuentra normas, ordenanzas, resoluciones, comunicados y boletines dentro de el archivo histórico del digesto.</p>
    
            </div>

            <div class="row m-2 m-md-4">
                <div class="col-md-6">

                    <!-- buscador x numero -->
                    <div class="card shadow-sm py-2 px-md-5 " style="height: 100%;">
                        <div class="card-body">                        
                            <div class="row my-3">
                                <div class="col-md-1 me-2">
                                    <a class="px-1 fs-1"><i class="bi bi-binoculars fs-1"></i></a>
                                </div>
                                <div class="col-md-9 my-3">
                                    <h4 class="card-title text-secondary">Buscar por número</h4>

                                    <p class="card-text">Si conoces el número exacto del elemento del digesto que estás buscando, escríbelo a continuación.</p>

                                    <div class="input-group mb-3">
                                        <input type="text" class="form-control" placeholder="Número de norma. ej: 027/03" aria-label="Número de norma." aria-describedby="numero">
                                        <button class="btn btn-outline-secondary" type="button" id="numero">Buscar</button>
                                    </div>
                                    

                                </div>    
                    
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">

                    <!-- buscar x fecha -->
                    <div class="card shadow-sm py-2 px-md-5" style="height: 100%;">
                        <div class="card-body">                        
                            <div class="row my-3">
                                <div class="col-md-1 me-2">
                                    <a class="px-1 fs-1"><i class="bi bi-calendar-date fs-1"></i></i></a>
                                </div>
                                <div class="col-md-9 my-3">
                                    <h4 class="card-title text-secondary">Buscar por fecha</h4>

                                    <p class="card-text">Para encontrar las resoluciones, comunicados, normativas y ordenanzas dentro de un período determinado.</p>

                                    <input type="text" class="form-control my-2" placeholder="Fecha de inicio ej: 3/2/2004" aria-label="Fecha de inicio" aria-describedby="fechaInicio">
                                    <input type="text" class="form-control my-2" placeholder="Fecha final. ej: 31/3/2004" aria-label="Fecha final" aria-describedby="fechaFinal">

                                    <button class="btn btn-outline-secondary my-2" type="button" id="fecha">Buscar</button>


                                </div>    
                    
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row m-2 m-md-4">
                <div class="col-md-6">

                    <!-- buscador x temas -->
                    <div class="card shadow-sm py-2  px-md-5" style="height: 100%;">
                        <div class="card-body">                        
                            <div class="row my-3">
                                <div class="col-md-1 me-2">
                                    <a class="px-1 fs-1"><i class="bi bi-bookmarks fs-1"></i></a>
                                </div>
                                <div class="col-md-9 my-3">
                                    <h4 class="card-title text-secondary">Buscar por temas</h4>

                                    <p class="card-text">Para filtrar los resultados empieza a escribir aquí o selecciona varios temas y presiona buscar.</p>

                                
                                        

                                    <div class="input-group my-3">
                                        

                                        <input class="form-control" list="datalistOptions" id="exampleDataList" placeholder="Type to search...">
                                        <datalist id="datalistOptions">
                                    
                                        </datalist>


                                        <button class="btn btn-outline-secondary" type="button" id="temas">Buscar</button>
                                    </div>
                                    

                                    
                                    <div class="col-12" id="labels">
                                        <span class="badge rounded-pill bg-primary me-1">
                                            tema
                                            <span class="badge"><a class="text-white text-decoration-none" href="">x</a></span>
                                        </span>
                                        
                                    </div>  
                                </div>    
                    
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">

                    <!-- buscador en texto -->
                    <div class="card shadow-sm py-2 px-md-5 " style="height: 100%;">
                        <div class="card-body">                        
                            <div class="row my-3">
                                <div class="col-md-1 me-2">
                                    <a class="px-1 fs-1"><i class="bi bi-card-checklist fs-1"></i></a>
                                </div>
                                <div class="col-md-9 my-3">
                                    <h4 class="card-title text-secondary">Buscar texto</h4>

                                    <p class="card-text">Buscar texto del contenido de la norma, esta búsqueda puede tomar varios minutos.</p>

                                                                
                                    <div class="input-group mb-3">
                                        <input type="text" class="form-control" placeholder="Ingresa el texto a buscar" aria-label="Texto" aria-describedby="texto">
                                        <button class="btn btn-outline-secondary" type="button" id="texto">Buscar</button>
                                    </div>
                                                                
                                </div>    
                    
                            </div>
                        </div>
                    </div>
                </div>
            </div>


        </div>
        
        <!-- BOOTSTRAP CDNS -->
        <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.0.8/dist/umd/popper.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    
        <!-- custom JS -->
        <script>
            $(document).ready(function () {
                // Function to add a badge for the selected tema
                function addBadge(topic) {
                    $('#labels').append(
                        '<span class="badge rounded-pill bg-primary me-1">' +
                            topic +
                            '<span class="badge"><a class="text-white text-decoration-none remove-badge" href="#">x</a></span>' +
                        '</span>'
                    );
                }
        
                // Event listener for the "Buscar" button
                $('#temas').click(function () {
                    var selectedTema = $('#exampleDataList').val();
                    
                    if (selectedTema) {
                        addBadge(selectedTema);
                    }
                });
        
                // Event listener for removing badges
                $('#labels').on('click', '.remove-badge', function () {
                    $(this).closest('.badge').remove();
                });
        
                // AJAX request to fetch temas and populate the datalist
                $.ajax({
                    url: 'https://elbolson2025.pythonanywhere.com/api/digesto/temas/',
                    method: 'GET',
                    dataType: 'json',
                    success: function (data) {
                        $('#datalistOptions').empty();
                        
                        for (var i = 0; i < data.length; i++) {
                            $('#datalistOptions').append('<option value="' + data[i].nombre + '" data-id="' + data[i].id + '">' + data[i].nombre + '</option>');
                        }
                    },
                    error: function (error) {
                        console.error('Error fetching data:', error);
                    }
                });
            });
        </script>
        

    
    </body>
</html>